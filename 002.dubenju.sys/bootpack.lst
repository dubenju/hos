     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12                                          [SECTION .text]
    13 00000000                                 	GLOBAL	_HariMain
    14 00000000                                 _HariMain:
    15 00000000 55                              	PUSH	EBP
    16 00000001 89 E5                           	MOV	EBP,ESP
    17 00000003 E8 00000029                     	CALL	_init_palette
    18 00000008 68 000001E0                     	PUSH	480
    19 0000000D 68 00000140                     	PUSH	320
    20 00000012 6A 00                           	PUSH	0
    21 00000014 6A 00                           	PUSH	0
    22 00000016 6A 07                           	PUSH	7
    23 00000018 68 00000280                     	PUSH	640
    24 0000001D 68 000A0000                     	PUSH	655360
    25 00000022 E8 000000A5                     	CALL	_boxfill8
    26 00000027 83 C4 1C                        	ADD	ESP,28
    27 0000002A                                 L2:
    28 0000002A E8 [00000000]                   	CALL	_io_hlt
    29 0000002F EB F9                           	JMP	L2
    30                                          [SECTION .data]
    31 00000000                                 _table_rgb.0:
    32 00000000 00                              	DB	0
    33 00000001 00                              	DB	0
    34 00000002 00                              	DB	0
    35 00000003 FF                              	DB	-1
    36 00000004 00                              	DB	0
    37 00000005 00                              	DB	0
    38 00000006 00                              	DB	0
    39 00000007 FF                              	DB	-1
    40 00000008 00                              	DB	0
    41 00000009 FF                              	DB	-1
    42 0000000A FF                              	DB	-1
    43 0000000B 00                              	DB	0
    44 0000000C 00                              	DB	0
    45 0000000D 00                              	DB	0
    46 0000000E FF                              	DB	-1
    47 0000000F FF                              	DB	-1
    48 00000010 00                              	DB	0
    49 00000011 FF                              	DB	-1
    50 00000012 00                              	DB	0
    51 00000013 FF                              	DB	-1
    52 00000014 FF                              	DB	-1
    53 00000015 FF                              	DB	-1
    54 00000016 FF                              	DB	-1
    55 00000017 FF                              	DB	-1
    56 00000018 C6                              	DB	-58
    57 00000019 C6                              	DB	-58
    58 0000001A C6                              	DB	-58
    59 0000001B 84                              	DB	-124
    60 0000001C 00                              	DB	0
    61 0000001D 00                              	DB	0
    62 0000001E 00                              	DB	0
    63 0000001F 84                              	DB	-124
    64 00000020 00                              	DB	0
    65 00000021 84                              	DB	-124
    66 00000022 84                              	DB	-124
    67 00000023 00                              	DB	0
    68 00000024 00                              	DB	0
    69 00000025 00                              	DB	0
    70 00000026 84                              	DB	-124
    71 00000027 84                              	DB	-124
    72 00000028 00                              	DB	0
    73 00000029 84                              	DB	-124
    74 0000002A 00                              	DB	0
    75 0000002B 84                              	DB	-124
    76 0000002C 84                              	DB	-124
    77 0000002D 84                              	DB	-124
    78 0000002E 84                              	DB	-124
    79 0000002F 84                              	DB	-124
    80                                          [SECTION .text]
    81 00000031                                 	GLOBAL	_init_palette
    82 00000031                                 _init_palette:
    83 00000031 55                              	PUSH	EBP
    84 00000032 89 E5                           	MOV	EBP,ESP
    85 00000034 68 [00000000]                   	PUSH	_table_rgb.0
    86 00000039 6A 0F                           	PUSH	15
    87 0000003B 6A 00                           	PUSH	0
    88 0000003D E8 00000002                     	CALL	_set_palette
    89 00000042 C9                              	LEAVE
    90 00000043 C3                              	RET
    91 00000044                                 	GLOBAL	_set_palette
    92 00000044                                 _set_palette:
    93 00000044 55                              	PUSH	EBP
    94 00000045 89 E5                           	MOV	EBP,ESP
    95 00000047 57                              	PUSH	EDI
    96 00000048 56                              	PUSH	ESI
    97 00000049 53                              	PUSH	EBX
    98 0000004A 51                              	PUSH	ECX
    99 0000004B 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   100 0000004E 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   101 00000051 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   102 00000054 E8 [00000000]                   	CALL	_io_load_eflags
   103 00000059 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   104 0000005C E8 [00000000]                   	CALL	_io_cli
   105 00000061 53                              	PUSH	EBX
   106 00000062 68 000003C8                     	PUSH	968
   107 00000067 E8 [00000000]                   	CALL	_io_out8
   108 0000006C 39 FB                           	CMP	EBX,EDI
   109 0000006E 58                              	POP	EAX
   110 0000006F 5A                              	POP	EDX
   111 00000070 7E 12                           	JLE	L11
   112 00000072                                 L13:
   113 00000072 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   114 00000075 89 45 08                        	MOV	DWORD [8+EBP],EAX
   115 00000078 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   116 0000007B 5B                              	POP	EBX
   117 0000007C 5E                              	POP	ESI
   118 0000007D 5F                              	POP	EDI
   119 0000007E 5D                              	POP	EBP
   120 0000007F E9 [00000000]                   	JMP	_io_store_eflags
   121 00000084                                 L11:
   122 00000084 8A 06                           	MOV	AL,BYTE [ESI]
   123 00000086 43                              	INC	EBX
   124 00000087 C0 E8 02                        	SHR	AL,2
   125 0000008A 0F B6 C0                        	MOVZX	EAX,AL
   126 0000008D 50                              	PUSH	EAX
   127 0000008E 68 000003C9                     	PUSH	969
   128 00000093 E8 [00000000]                   	CALL	_io_out8
   129 00000098 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   130 0000009B C0 E8 02                        	SHR	AL,2
   131 0000009E 0F B6 C0                        	MOVZX	EAX,AL
   132 000000A1 50                              	PUSH	EAX
   133 000000A2 68 000003C9                     	PUSH	969
   134 000000A7 E8 [00000000]                   	CALL	_io_out8
   135 000000AC 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   136 000000AF C0 E8 02                        	SHR	AL,2
   137 000000B2 83 C6 03                        	ADD	ESI,3
   138 000000B5 0F B6 C0                        	MOVZX	EAX,AL
   139 000000B8 50                              	PUSH	EAX
   140 000000B9 68 000003C9                     	PUSH	969
   141 000000BE E8 [00000000]                   	CALL	_io_out8
   142 000000C3 83 C4 18                        	ADD	ESP,24
   143 000000C6 39 FB                           	CMP	EBX,EDI
   144 000000C8 7E BA                           	JLE	L11
   145 000000CA EB A6                           	JMP	L13
   146 000000CC                                 	GLOBAL	_boxfill8
   147 000000CC                                 _boxfill8:
   148 000000CC 55                              	PUSH	EBP
   149 000000CD 89 E5                           	MOV	EBP,ESP
   150 000000CF 57                              	PUSH	EDI
   151 000000D0 56                              	PUSH	ESI
   152 000000D1 53                              	PUSH	EBX
   153 000000D2 57                              	PUSH	EDI
   154 000000D3 57                              	PUSH	EDI
   155 000000D4 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   156 000000D7 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   157 000000DA 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   158 000000DD 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   159 000000E0 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   160 000000E3 7F 31                           	JG	L26
   161 000000E5 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   162 000000E8 0F AF D9                        	IMUL	EBX,ECX
   163 000000EB                                 L24:
   164 000000EB 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   165 000000EE 39 FA                           	CMP	EDX,EDI
   166 000000F0 7F 1B                           	JG	L28
   167 000000F2 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   168 000000F5 01 DE                           	ADD	ESI,EBX
   169 000000F7 01 D6                           	ADD	ESI,EDX
   170 000000F9 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   171 000000FC                                 L23:
   172 000000FC 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   173 000000FF 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   174 00000102 42                              	INC	EDX
   175 00000103 88 06                           	MOV	BYTE [ESI],AL
   176 00000105 46                              	INC	ESI
   177 00000106 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   178 00000109 39 FA                           	CMP	EDX,EDI
   179 0000010B 7E EF                           	JLE	L23
   180 0000010D                                 L28:
   181 0000010D 41                              	INC	ECX
   182 0000010E 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   183 00000111 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   184 00000114 7E D5                           	JLE	L24
   185 00000116                                 L26:
   186 00000116 5B                              	POP	EBX
   187 00000117 5E                              	POP	ESI
   188 00000118 5B                              	POP	EBX
   189 00000119 5E                              	POP	ESI
   190 0000011A 5F                              	POP	EDI
   191 0000011B 5D                              	POP	EBP
   192 0000011C C3                              	RET
